<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.stylefeng.roses.kernel.system.modular.user.mapper.SysUserMapper">

    <resultMap id="sysUserResponse" type="cn.stylefeng.roses.kernel.system.modular.user.pojo.response.SysUserResponse">
        <id column="id" property="id"/>
        <result column="account" property="account"/>
        <result column="nick_name" property="nickName"/>
        <result column="name" property="name"/>
        <result column="avatar" property="avatar"/>
        <result column="birthday" property="birthday"/>
        <result column="sex" property="sex"/>
        <result column="email" property="email"/>
        <result column="phone" property="phone"/>
        <result column="tel" property="tel"/>
        <result column="status_flag" property="statusFlag"/>
    </resultMap>

    <!--获取用户分页列表-->
    <select id="findUserPage" resultType="cn.stylefeng.roses.kernel.system.modular.user.pojo.response.SysUserResponse">
        select sys_user.*,
        sys_employee.employeeNo,
        sys_employee.organization_id,
        from sys_user
        left join sys_employee on sys_user.id = sys_employee.user_id
        <where>
            <if test="sysUserRequest.name != null and sysUserRequest.name != ''">
                and sys_user.name like concat('%',#{sysUserRequest.name},'%')
            </if>
            <if test="sysUserRequest.account != null and sysUserRequest.account != ''">
                and sys_user.account like concat('%',#{sysUserRequest.account},'%')
            </if>
            <if test="sysUserRequest.statusFlag != null and sysUserRequest.statusFlag != ''">
                and sys_user.status_flag like concat('%',#{sysUserRequest.statusFlag},'%')
            </if>
            <if test="sysUserRequest.organizationId != null and sysUserRequest.organizationId != ''">
                and sys_user.organization_id like concat('%',#{sysUserRequest.organizationId},'%')
            </if>
            and sys_user.del_flag = 'N'
            order by create_time desc
        </where>

    </select>

</mapper>
